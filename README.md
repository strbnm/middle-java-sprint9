### Микросервисное приложение «Банк»

Микросервисное приложение «Банк» с использованием Spring Boot (реактивный стек) и паттернов микросервисной архитектуры, с настроенным CI/CD (Jenkins) и деплоем в k8s
в рамках выполнения задания спринта 10 курса Middle-Java Яндекс.Практикум.
- Spring Boot 3.4.4
- Spring Security
- Spring Cloud Gateway
- Spring Cloud Config Server
- Spring Cloud Netflix Eureka
- Spring Cloud Contract
- R2DBC
- WebFlux
- Thymeleaf
- Lombok
- Jenkins
- K8s

Приложение состоит из следующих микросервисов, реализованных в виде отдельных моделей многомодульного проекта:
- [фронта (Front UI)](front-ui)
- [сервиса аккаунтов (Accounts)](accounts-service)
- [сервиса обналичивания денег (Cash)](cash-service)
- [сервиса перевода денег между счетами одного или двух аккаунтов (Transfer)](transfer-service)
- [сервиса конвертации валют (Exchange)](exchange-service)
- [сервиса генерации курсов валют (Exchange Generator)](exchange-generator)
- [сервиса блокировки подозрительных операций (Blocker)](blocker-service)
- [сервиса уведомлений (Notifications)](notifications-service)

Сервисы разворачиваются в кластере k8s c помощью helm чартов.
Для обнаружения сервисов в кластере, балансировки нагрузки и маршрутизации внешнего трафика используется Gateway 
API на базе NGINX Gateway Fabric - API Gateway, Load Balancing, Service Discovery.

Все микросервисы реализующие [REST API](openapi), имеют контракты.

Все микросервисы разворачиваются в собственном контейнере (поде) - паттерн Single Service per Host.

Также часть сервисов имеют собственную БД - паттерн Database per Service.

Для OAuth2 используется Keycloak.

Все микросервисы предоставляют ручку /actuator/health для проверки своего состояния и проб liveness и readiness - паттерн Health Check API.

Сервис нотификации имитирует отправку сообщений на электронную почту, распечатывая их в лог.

Отправка уведомлений в сервис нотификации микросервисами Accounts, Cash и Transfer осуществляется с использованием паттерна Transactional Outbox.

Конфигурации хранятся в виде шаблонов configmap и загружаются при развертывании через helm или обновляются через kubectl apply - паттерн External Configuration.

#### Сборка приложения

Для сборки всех модулей приложения осуществляется в рамках процессов CI/CD, реализованных в Jenkins.
Для каждого 

Для отдельной сборки модулей использовать указанную ниже команду, но сборка в этом случае должна осуществляться согласно 
следованию модулей в [settings.gradle](settings.gradle), чтобы обеспечить наличие в локальном репозитории артефактов *.stubs.jar, 
от которых зависят тесты модуля. 
```shell
./gradlew :<имя_модуля>:clean :<имя_модуля>:build
```

#### Деплой и запуск приложения в Docker

Для запуска приложения в Docker после выполнения сборки выполнить следующую команду в корневом каталоге:
```shell
docker compose up -d --build
```
После запуска контейнеров сайт приложения будет доступен по адресу: `http://localhost:8090/bank-app`
Генерация курсов валют начинается через 2 минуты после старта exchange-generator.

#### Пользователи
При первоначальной загрузке приложения создаются тестовые пользователи
1. `test_user1` c паролем `test_user1_pass`;
2. `test_user2` c паролем `test_user2_pass`;
3. `test_user3` c паролем `test_user3_pass`.

